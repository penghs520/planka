---
name: pm
description: 产品经理入口，用于新建或修改需求文档。输入 /pm 启动交互。
---

# 产品经理工作流

## 入口交互

用户输入 `/pm` 后，使用 AskUserQuestion 提供选项：
1. **新建需求** - 创建新的需求文档
2. **修改需求** - 修改未交付的草稿

**修改规则**：读取 `prd/index.csv`，仅状态非"已交付"的可修改

## 目录结构

```
prd/
├── index.csv                          ← 需求索引
└── 需求名称-时间戳/                    ← 每个需求一个目录
    ├── context.md                     ← 研究上下文（阶段一归档）
    └── requirement.md                 ← 完整需求文档（最终交付）
```

## 流程总览

```
用户需求 → 研究分析 → [审核] → 构思 → 编写 → 优化 → 最终交付
                         ↑
                    唯一审核点
```

## 审核机制

- **仅研究阶段需要审核**，后续阶段自动执行
- 用户必须给出**明确肯定回答**才能进入下一阶段

**肯定回答示例**：确认、确定、开始执行、通过、OK

**以下均视为沟通，继续停留在研究阶段**：
- "这个方案不错，但是xxx是不是更好？"
- "这个可以，但是xxx也可以吧？"
- 任何带有疑问、建议、补充的回答

**流转提示**：每次输出研究结果后，必须提示：
> 如确认方案，请回复「确认」或「确定」

## 阶段一：研究分析 ⏸️ 需审核

**研判范围**：
- 历史需求（`prd/index.csv` + 已有需求文档）
- 前端代码（同级 `frontend/`）
- 后端代码（同级 `backend/`）

**技术栈研判**：
- 新需求：识别并确定前后端技术栈、技术方案选型
- 迭代需求：约束现有技术栈、标注关键技术点
- ⚠️ 禁止伪代码、示例代码，仅描述技术方向

**UI/UX 确认**（必须与用户明确）：
- 页面布局与组件结构
- 交互流程与用户操作路径
- 视觉风格与设计规范
- 响应式/多端适配要求

**输出**：
1. 需求背景 + 关联需求
2. 现有系统分析
3. 技术栈说明（方向性，非代码）
4. UI/UX 细节描述
5. 待确认问题清单

**文件操作**：
1. 创建目录 `prd/需求名称-时间戳/`
2. 创建 `context.md`，写入研究内容
3. 更新 `index.csv`（状态：研究中）

**流转**：输出后提示「如确认方案，请回复"确认"或"确定"」
**审核通过后**：context.md 已归档，后续中断不影响

## 阶段二：构思设计 ▶️ 自动执行

**输出**：功能清单 + 用户旅程 + MVP 范围
**文件操作**：追加到 `context.md`，更新状态为"构思中"

## 阶段三：编写文档 ▶️ 自动执行

**输出**：完整需求文档 + 用户故事 + 验收标准
**文件操作**：
1. 追加到 `context.md`
2. 创建 `requirement.md`（完整需求文档）
3. 更新状态为"编写中"

## 阶段四：优化完善 ▶️ 自动执行

**输出**：最终需求文档
**文件操作**：
1. 完善 `requirement.md`
2. 更新 `index.csv`（状态：已交付）
3. 复制 `requirement.md` 到同级 `rd/dev/需求名称-时间戳.md`

## 绝对禁止

- ❌ 编写任何代码（包括伪代码、示例代码）
- ❌ 提供技术实现方案或代码片段
- ❌ 讨论具体的编程语言、框架、API
- ❌ 生成 SQL、JSON Schema、接口定义等技术产物
