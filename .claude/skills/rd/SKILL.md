---
name: rd
description: 需求开发技能 - 扫描dev目录选择需求文档，全自动执行六阶段开发流程
---

# 需求开发工作流

## 入口交互

用户输入 `/rd` 后，扫描 `dev/` 下 PM 交付的 `.md` 文件

## 与 PM 交接

PM 交付格式：`dev/需求名-yyyymmddhhmmss.md`（从 pm/prd/ 复制过来的 requirement.md）

## 交互流程
1. 扫描 `dev/` 下的 `.md` 文件（排除已归档文件夹内的）
2. AskUserQuestion 让用户选择需求文档
3. 全自动执行六阶段

## 六阶段流程

### 阶段1：研究需求
- 读取需求文档，提取功能点
- **结合当前项目代码**识别相关模块
- 输出：相关文件清单

### 阶段2：构思方案
- 分析现有架构、技术栈、代码风格
- 检查可复用组件/函数/接口
- 技术选型必须与现有栈一致
- 输出：技术方案概要

### 阶段3：编写计划
- 拆解原子任务
- 每个任务标注：涉及文件、修改类型、依赖关系
- 保存到 `.claude/plan/{需求名}.md`
- 格式：`[ ] 任务描述 | 文件: xxx | 类型: 新增/修改`

### 阶段4：审核计划
- **兼容性检查**：接口签名、数据结构、组件props
- **冲突检测**：是否与现有逻辑冲突
- **影响范围**：列出受影响模块/页面/接口
- AskUserQuestion 确认计划

### 阶段5：执行计划
- ⚠️ **执行前重新读取 CLAUDE.md 规范**
- 逐步执行，遵守20行限制
- 每步完成**立即**标记 `[✅]`

### 阶段6：归档留痕
- ⚠️ **执行前重新读取 CLAUDE.md 规范**
- 在 `dev/` 下新建同名文件夹
- 移动需求文档到文件夹
- 复制执行计划到文件夹
- 保存执行报告到文件夹

## 归档结构

**PM 交付（待处理）**：`dev/需求名-yyyymmddhhmmss.md`

**RD 归档（已完成）**：
```
dev/
├── 积分兑换-20260120160000.md      # PM 交付，待处理
└── 用户积分-20260120143052/        # RD 归档，已完成
    ├── 用户积分-20260120143052.md  # 原始需求文档
    ├── plan.md                     # 执行计划
    └── report.md                   # 执行报告
```

## 与 QA 交接

开发完成后，QA 读取 `dev/xxx/` 归档目录进行测试
